<!DOCTYPE html>
<html>
<head>
    <title>ESOFA High-Speed Racers</title>
    <style>
        body { margin: 0; background: #222; color: white; font-family: 'Arial', sans-serif; overflow: hidden; text-align: center; }
        canvas { background: #333; border: 5px solid #555; display: block; margin: 0 auto; }
        
        #game-ui { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                   background: rgba(0,0,0,0.9); padding: 30px; border-radius: 15px; border: 3px solid #00ffcc; display: none; width: 320px; }
        
        .btn { display: block; padding: 15px; margin: 10px 0; text-decoration: none; font-weight: bold; border-radius: 8px; cursor: pointer; border: none; font-size: 14px; color: white; transition: 0.2s; }
        .btn:hover { transform: scale(1.05); }
        
        .retry-btn { background: #00ffcc; color: black; }
        .esofa-btn { background: #d4af37; color: black; }
        /* NEW SANCO BUTTON STYLE */
        .sanco-btn { background: #ff0000; color: white; border: 2px solid white; }
        
        #score-display { position: absolute; top: 10px; width: 100%; font-size: 24px; font-weight: bold; pointer-events: none; }
    </style>
</head>
<body>

<div id="score-display">DISTANCE: <span id="dist">0</span>m</div>

<div id="game-ui">
    <h1 style="color:#00ffcc; margin-top:0;">CRASHED!</h1>
    <p>Distance Reached: <span id="final-dist">0</span>m</p>
    
    <button class="btn retry-btn" onclick="location.reload()">TRY AGAIN</button>
    <a class="btn esofa-btn" href="https://www.sanangelogives.org/organization/emmanuelschooloffinearts" target="_blank">ðŸŽ» TIP ESOFA SCHOOL</a>
    
    <a class="btn sanco-btn" href="https://www.youtube.com/@SancoOutdoors" target="_blank">ðŸŽ¬ SUB TO SANCO OUTDOORS</a>
</div>

<canvas id="raceCanvas"></canvas>

<script>
    const canvas = document.getElementById('raceCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 600;

    let player = { x: 175, y: 500, w: 50, h: 80, speed: 5 };
    let enemies = [];
    let distance = 0;
    let gameOver = false;
    let keys = {};

    window.addEventListener('keydown', e => keys[e.code] = true);
    window.addEventListener('keyup', e => keys[e.code] = false);

    function spawnEnemy() {
        if (gameOver) return;
        let lane = Math.floor(Math.random() * 3);
        enemies.push({ x: lane * 133 + 40, y: -100, w: 50, h: 80, speed: 4 + (distance / 500) });
        setTimeout(spawnEnemy, Math.max(500, 1500 - (distance / 10)));
    }

    function update() {
        if (gameOver) return;

        if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
        if (keys['ArrowRight'] && player.x < canvas.width - player.w) player.x += player.speed;

        distance++;
        document.getElementById('dist').innerText = Math.floor(distance / 10);

        enemies.forEach((en, index) => {
            en.y += en.speed;
            
            // Collision Logic
            if (player.x < en.x + en.w && player.x + player.w > en.x &&
                player.y < en.y + en.h && player.y + player.h > en.y) {
                endGame();
            }

            if (en.y > canvas.height) enemies.splice(index, 1);
        });

        draw();
        requestAnimationFrame(update);
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Road Lines
        ctx.strokeStyle = "white";
        ctx.setLineDash([20, 20]);
        ctx.beginPath();
        ctx.moveTo(133, 0); ctx.lineTo(133, canvas.height);
        ctx.moveTo(266, 0); ctx.lineTo(266, canvas.height);
        ctx.stroke();

        // Player Car
        ctx.fillStyle = "#00ffcc";
        ctx.fillRect(player.x, player.y, player.w, player.h);
        ctx.fillStyle = "black"; // Windshield
        ctx.fillRect(player.x + 5, player.y + 10, player.w - 10, 20);

        // Enemies
        ctx.fillStyle = "#ff4444";
        enemies.forEach(en => {
            ctx.fillRect(en.x, en.y, en.w, en.h);
            ctx.fillStyle = "black";
            ctx.fillRect(en.x + 5, en.y + 50, en.w - 10, 20);
            ctx.fillStyle = "#ff4444";
        });
    }

    function endGame() {
        gameOver = true;
        document.getElementById('final-dist').innerText = Math.floor(distance / 10);
        document.getElementById('game-ui').style.display = 'block';
    }

    spawnEnemy();
    update();
</script>
</body>
</html>
